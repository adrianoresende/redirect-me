function handleRedirect(e,t){e&&chrome.storage.sync.get("redirects",({redirects:r})=>{if(r&&r.length>0)for(const s of r)if((e===s.from||e.startsWith(s.from+"/"))&&!e.startsWith(s.to)){chrome.tabs.update(t,{url:s.to});break}})}chrome.webNavigation.onHistoryStateUpdated.addListener(e=>{0===e.frameId&&handleRedirect(e.url,e.tabId)}),chrome.tabs.onUpdated.addListener((e,t,r)=>{t.url&&handleRedirect(t.url,e)}),chrome.runtime.onInstalled.addListener(e=>{"install"===e.reason&&chrome.storage.sync.get("redirects",({redirects:e})=>{const t=[{from:"https://www.instagram.com/",to:"https://www.instagram.com/direct"}];e&&0!==e.length||chrome.storage.sync.set({redirects:t})})});