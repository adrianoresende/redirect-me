const redirectList=document.getElementById("redirect-list"),addForm=document.getElementById("add-redirect-form"),fromUrlInput=document.getElementById("from-url"),toUrlInput=document.getElementById("to-url");function renderRedirects(){chrome.storage.sync.get("redirects",({redirects:e})=>{if(redirectList.innerHTML="",e&&e.length>0)e.forEach((e,t)=>{const r=document.createElement("li");r.className="flex items-center justify-between p-3";const n=document.createElement("div");n.className="flex flex-col text-sm overflow-hidden";const d=document.createElement("span");d.className="text-gray-500 truncate",d.textContent=`From: ${e.from}`,d.title=e.from;const c=document.createElement("span");c.className="text-blue-600 font-bold truncate",c.textContent=`To: ${e.to}`,c.title=e.to,n.appendChild(d),n.appendChild(c);const o=document.createElement("button");o.textContent="Delete",o.className="delete-btn cursor-pointer ml-4 py-2 px-3 bg-red-600 text-white text-xs font-bold rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",o.dataset.index=t,r.appendChild(n),r.appendChild(o),redirectList.appendChild(r)});else{const e=document.createElement("li");e.textContent="No redirects configured.",e.className="text-center text-gray-500 py-5",redirectList.appendChild(e)}})}addForm.addEventListener("submit",e=>{e.preventDefault();const t=fromUrlInput.value,r=toUrlInput.value;t&&r&&chrome.storage.sync.get("redirects",({redirects:e})=>{const n=e||[];n.push({from:t,to:r}),chrome.storage.sync.set({redirects:n},()=>{fromUrlInput.value="",toUrlInput.value="",renderRedirects()})})}),redirectList.addEventListener("click",e=>{if(e.target.classList.contains("delete-btn")){const t=parseInt(e.target.dataset.index,10);chrome.storage.sync.get("redirects",({redirects:e})=>{const r=e.filter((e,r)=>r!==t);chrome.storage.sync.set({redirects:r},()=>{renderRedirects()})})}}),document.addEventListener("DOMContentLoaded",renderRedirects);